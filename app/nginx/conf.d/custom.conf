gzip on;
gzip_disable "msie6";

gzip_vary on;
gzip_proxied any;
gzip_comp_level 6;
gzip_buffers 16 8k;
gzip_http_version 1.1;
gzip_min_length 1024;

# http->https
error_page 497 301 =307 https://$host:$server_port$request_uri; 

# code.home.lubui.com
server {
    server_name code.home.lubui.com;
    http2 on;
    listen 8443 ssl ;
    ssl_session_timeout 5m;
    ssl_session_cache shared:SSL:50m;
    ssl_session_tickets off;
    ssl_certificate /etc/nginx/certs/home.lubui.com.crt;
    ssl_certificate_key /etc/nginx/certs/home.lubui.com.key;
    set $sts_header "";
    if ($https) {
        set $sts_header "max-age=31536000";
    }
    add_header Strict-Transport-Security $sts_header always;
    location / {
        proxy_pass http://127.0.0.1:7007;
        set $upstream_keepalive false;
    }
}

